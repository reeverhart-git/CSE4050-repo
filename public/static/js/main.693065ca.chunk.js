(this["webpackJsonpreact-firebase-chat"]=this["webpackJsonpreact-firebase-chat"]||[]).push([[0],{158:function(e,t,n){},461:function(e,t,n){"use strict";n.r(t);var a=n(3),s=n(4),c=n.n(s),r=n(26),i=n.n(r),o=(n(158),n(97),n(91)),l=n(6),u=n(95);n(161);u.a.initializeApp({apiKey:"AIzaSyAuDR0r2xTnyQLV0B3RqBwKDQ-xF6Z0byk",authDomain:"cse4050-project.firebaseapp.com",databaseURL:"https://cse4050-project.firebaseio.com",projectId:"cse4050-project",storageBucket:"cse4050-project.appspot.com",messagingSenderId:"497709309774",appId:"1:497709309774:web:5a0427ea9bba3b4494481f",measurementId:"G-WW1ZV5T6P8"});var b=u.a,j=n(39),p=n(145),m=n(146),d=n(152),h=n(151),x=(n(462),n(149)),O=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).sendMessage=function(){var e=b.auth().currentUser,t="";t=null==e.displayName?e.email:e.displayName;var n=b.firestore(),s=b.firestore.Timestamp.fromDate(new Date);a.state.newMsgContent.trim().length>0&&n.collection("messages").add({username:t,content:a.state.newMsgContent,timestamp:s}),a.setState({newMsgContent:""})},a.componentWillMount=function(){return b.firestore().collection("messages").orderBy("timestamp").onSnapshot((function(e){var t=[];e.forEach((function(e){return t.push(Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id,timestamp:e.timestamp}))})),a.setState({messages:t})}))},a.listener=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||a.sendMessage()},a.state={messages:[],newMsgContent:"",displayName:"Anonymous"},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"chatbox",children:Object(a.jsxs)("div",{className:"scrollwrapper",children:[Object(a.jsx)(x.a,{forceScroll:!0,className:"scrollbox",children:this.state.messages.map((function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("li",{className:"message",children:[Object(a.jsx)("span",{className:"username",children:e.username}),": ",Object(a.jsx)("span",{className:"content",children:e.content})]},e.id),Object(a.jsx)("div",{id:"end",className:"anchor"})]})}))}),Object(a.jsxs)("div",{id:"MsgBar",className:"inputbox",children:[Object(a.jsx)("input",{className:"inputfield",placeholder:"Type a message here!",onKeyDown:this.listener,value:this.state.newMsgContent,onChange:function(t){return e.setState({newMsgContent:t.target.value})}}),Object(a.jsx)("button",{className:"button",onClick:this.sendMessage,children:"Send"})]})]})})})}}]),n}(c.a.Component),f=n(64),v=function(e){var t=e.history,n=Object(s.useState)(b.auth().currentUser.email),c=Object(f.a)(n,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){null==b.auth().currentUser.displayName?i(b.auth().currentUser.email):i(b.auth().currentUser.displayName)})),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"userdash",children:[Object(a.jsxs)("span",{children:["Welcome to the Chat Room,",Object(a.jsx)("span",{className:"username",children:r}),"!"]}),Object(a.jsx)("button",{className:"button",onClick:function(){return b.auth().signOut()},children:"Sign Out"}),Object(a.jsx)("button",{className:"button",onClick:function(){return t.push("/profile")},children:"Edit Profile"})]}),Object(a.jsx)(O,{})]})},g=n(30),N=n.n(g),y=n(44),w=c.a.createContext(),C=function(e){var t=e.children,n=Object(s.useState)(null),c=Object(f.a)(n,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){b.auth().onAuthStateChanged(i)}),[]),Object(a.jsx)(w.Provider,{value:{currentUser:r},children:t})},k=Object(l.f)((function(e){var t=e.history,n=Object(s.useCallback)(function(){var e=Object(y.a)(N.a.mark((function e(n){var a,s,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=n.target.elements,s=a.email,c=a.password,e.prev=2,e.next=5,b.auth().signInWithEmailAndPassword(s.value,c.value);case 5:t.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(s.useContext)(w).currentUser?Object(a.jsx)(l.a,{to:"/"}):Object(a.jsxs)("div",{className:"userdash",children:[Object(a.jsx)("h1",{className:"inputbox",children:"Log in"}),Object(a.jsxs)("form",{onSubmit:n,children:[Object(a.jsxs)("label",{children:["Email",Object(a.jsx)("input",{className:"inputbox",name:"email",type:"email",placeholder:"Email"})]}),Object(a.jsxs)("label",{children:["Password",Object(a.jsx)("input",{className:"inputbox",name:"password",type:"password",placeholder:"Password"})]}),Object(a.jsx)("button",{className:"button",type:"submit",children:"Log In"})]}),Object(a.jsx)("button",{className:"button",onClick:function(){return t.push("/signup")},children:"Not a member?"})]})})),S=Object(l.f)((function(e){var t=e.history,n=Object(s.useCallback)(function(){var e=Object(y.a)(N.a.mark((function e(n){var a,s,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=n.target.elements,s=a.email,c=a.password,e.prev=2,e.next=5,b.auth().createUserWithEmailAndPassword(s.value,c.value);case 5:t.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(a.jsxs)("div",{className:"userdash",children:[Object(a.jsx)("h1",{className:"inputbox",children:"Sign Up"}),Object(a.jsxs)("form",{onSubmit:n,children:[Object(a.jsxs)("label",{children:["Email",Object(a.jsx)("input",{className:"inputbox",name:"email",type:"email",placeholder:"Email"})]}),Object(a.jsxs)("label",{children:["Password",Object(a.jsx)("input",{className:"inputbox",name:"password",type:"password",placeholder:"Password"})]}),Object(a.jsx)("button",{className:"button",type:"submit",children:"Sign Up"})]}),Object(a.jsx)("button",{className:"button",onClick:function(){return t.push("/login")},children:"Already a member?"})]})})),U=n(153),E=function(e){var t=e.component,n=Object(U.a)(e,["component"]),c=Object(s.useContext)(w).currentUser;return Object(a.jsx)(l.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return c?Object(a.jsx)(t,Object(j.a)({},e)):Object(a.jsx)(l.a,{to:"/login"})}}))},D=Object(l.f)((function(e){var t=e.history,n=Object(s.useCallback)(function(){var e=Object(y.a)(N.a.mark((function e(n){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=n.target.elements.displayname,e.prev=2,e.next=5,b.auth();case 5:c.updateProfile({displayName:a.value}),t.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),[t]),c=Object(s.useContext)(w).currentUser;return Object(a.jsxs)("div",{className:"userdash",children:[Object(a.jsx)("h1",{className:"inputbox",children:"Log in"}),Object(a.jsxs)("form",{onSubmit:n,children:[Object(a.jsxs)("label",{children:["Display Name",Object(a.jsx)("input",{className:"inputbox",name:"displayname",type:"displayname",placeholder:"Displayname"})]}),Object(a.jsx)("button",{className:"button",type:"submit",children:"Update"})]})]})})),M=function(){return Object(a.jsx)(C,{children:Object(a.jsx)(o.a,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)(E,{exact:!0,path:"/",component:v}),Object(a.jsx)(E,{exact:!0,path:"/profile",component:D}),Object(a.jsx)(l.b,{exact:!0,path:"/login",component:k}),Object(a.jsx)(l.b,{exact:!0,path:"/signup",component:S})]})})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,463)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(M,{})}),document.getElementById("root")),P()},97:function(e,t,n){}},[[461,1,2]]]);
//# sourceMappingURL=main.693065ca.chunk.js.map